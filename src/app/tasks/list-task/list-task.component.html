
<section class="toolbar" dir="rtl" lang="ar">
  <label for="statusFilter">تصفية الحالة</label>
  <select id="statusFilter" [formControl]="statusFilter">
    <option *ngFor="let o of filterOptions" [value]="o">
      {{ o === 'All' ? 'الكل' : o }}
    </option>
  </select>
</section>

<table class="grid" *ngIf="(vm$ | async) as vm" dir="rtl" lang="ar">
  <thead>
    <tr>
      <th>العنوان</th>
      <th>الحالة</th>
      <th>إجراءات</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let t of vm.tasks; trackBy: trackById">
      <td>
        <div class="title">{{ t.title }}</div>
        <div class="desc" *ngIf="t.description">{{ t.description }}</div>
      </td>

      <td>
        <span class="badge"
              [class.pending]="t.status === TaskStatus.Pending"
              [class.inprog]="t.status === TaskStatus.InProgress"
              [class.done]="t.status === TaskStatus.Completed">
          {{ t.status }}
        </span>
      </td>

      <td class="actions">
        <button
          (click)="markInProgress(t)"
          [disabled]="t.status === TaskStatus.InProgress || t.status === TaskStatus.Completed">
          قيد التنفيذ
        </button>
        <button
          (click)="markCompleted(t)"
          [disabled]="t.status === TaskStatus.Completed">
          منجزة
        </button>
      </td>
    </tr>
  </tbody>
</table>

<p class="muted" *ngIf="(vm$ | async)?.total === 0" dir="rtl" lang="ar">
  لا توجد مهام بعد. أضِف أول مهمة الآن!
</p>
